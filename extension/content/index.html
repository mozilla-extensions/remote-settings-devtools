<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body class=" loading">
  <section id="header">
    <section id="env-actions">
      <h2>Environment</h2>
      <select id="environment">
        <option value="custom"></option>
        <option value="prod">Prod</option>
        <option value="prod-preview">Prod (preview)</option>
        <option value="stage">Stage</option>
        <option value="stage-preview">Stage (preview)</option>
        <option value="dev">Dev</option>
        <option value="dev-preview">Dev (preview)</option>
        <option value="local">Local</option>
      </select>
      <button id="run-poll" title="Poll for changes of remote settings">Sync</button>
      <button id="clear-all-data" title="Clear every local data">Clear all</button>
      <div id="environment-error" class="error">⚠️ Environment cannot be changed. Try running Firefox with environment variable <pre>MOZ_REMOTE_SETTINGS_DEVTOOLS=1</pre></div>
    </section>
    <section id="header-status"">
      <h2>Status</h2>
      <div id="polling-error" class="error"></div>
      <dl>
        <dt>URL</dt>
        <dd><a id="polling-url"></a></dd>
        <dt>Server timestamp</dt>
        <dd id="human-server-timestamp">N/A</dd>
        <dd id="server-timestamp">N/A</dd>
      </dl>
      <dl>
        <dt>Local timestamp</dt>
        <dd id="human-local-timestamp">N/A</dd>
        <dd id="local-timestamp">N/A</dd>
        <dt>Last check</dt>
        <dd id="last-check">N/A</dd>
      </dl>
    </section>
    <section id="sync-history">
      <h2>Sync History</h2>
      <ul></ul>
    </section>
  </section>
  <section id="status">
    <table id="status-table">
      <thead>
        <tr>
          <th><span class="sort" data-sort="collection">Collection</span></th>
          <th><span class="sort" data-sort="last-check">Last Check</span></th>
          <th><span class="sort desc" data-sort="server-timestamp">Server Timestamp</span></th>
          <th><span class="sort" data-sort="local-timestamp">Local Timestamp</span></th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody class="list">
      </tbody>
    </table>
  </section>
</body>

<template id="collection-status-tpl">
  <tr class="collection-status">
    <td>
      <a class="collection url"></a>
      <div class="error"></div>
    </td>
    <td class="last-check"></td>
    <td class="server">
      <span class="human-server-timestamp"></span>
      <span class="server-timestamp"></span>
    </td>
    <td class="local">
      <span class="human-local-timestamp"></span>
      <span class="local-timestamp"></span>
    </td>
    <td class="actions">
      <button class="sync action" title="Force sync"></button>
      <button class="clear-data action" title="Clear local data"></button>
    </td>
  </tr>
</template>

<template id="sync-history-entry-tpl">
  <li>
    <span class="status"></span>
    <span class="datetime"></span>
  </li>
</template>

<script type="text/javascript" src="list-2.3.1.min.js"></script>
<script type="text/javascript" src="script.js"></script>

</html>
